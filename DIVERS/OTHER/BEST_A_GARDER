##

#le fichier est :
/home/axel/com/medicis/imdv-intranet/src/main/webapp/WEB-INF/hibernate.cfg.xml



#-----------------------------------------------------------------------------------------------
#TEST LIQUIBASE
#-----------------------------------------------------------------------------------------------
LANCER LIQUIBASE
LANCER TU
LANCE APP
#-----------------------------------------------------------------------------------------------




#############################
# lancer liquibase sur ATN  #
#############################
# profile apply-db-migration (attention : il va tout re-executer, mais verifie tu es OK)
# gestion de la base de donnee ==> install

UPDATE DATABASECHANGELOGLOCK
SET locked=0, lockgranted=null, lockedby=null
WHERE id=1

----------------------------------------
LIQUIBASE
----------------------------------------
runOnChange=true
liquibase : tu me joue tout et prend les checksum





##
------------------------
# wiki a rajouter

# liquid car jenkins sait la machine
        <profile>
                <id>dev-AREGNOULT</id>
                <properties>
                       <db.driver>com.mysql.jdbc.Driver</db.driver>
                       <db.jdbc>jdbc:mysql://axel-HP-Compaq-8200-Elite-SFF-PC:3306/medicisdb</db.jdbc>
                       <db.user>admin</db.user>
                       <db.password>adm1n</db.password>
                </properties>
        </profile>


#--------------------------------
# Pour lancer le liquibase
#--------------------------------
# mettre le profil MAVEN sur:
-  LOCALHOST
-  APPLY-DB-MIGRATION
# puis maven (partie DB)
-  clean
-  install


#--------------------------------
# coutaumille.xml
#--------------------------------
# si rien, il fait sur tous, mais la on a
# besoin que sur H2
  <preConditions onFail="MARK_RAN">
            <dbms type="h2"/>
        </preConditions>
# en suppression : pas besoin car la table exite deja


############
# PROCESS
############

#fichier :
liquidbase > src > main > structure > 'tu rajoutes ton fichier'

# attention a commenter les clefs des index : car H2  ne prend pas en compte les clefs




#TAGGER
git tag nom_du_tag HEAD
git push origin --tags

git merge 2.2.25 # merge depuis le tag

ga 	backend/src/main/java/com/groupemre/atnv2/dao/delivery/router/RouterContentDeliveryDAO.java backend/src/main/java/com/groupemre/atnv2/services/router/RouterService.java multirouter/src/main/java/com/groupemre/atnv2/globecast/service/GlobeCastService.java multirouter/src/main/java/com/groupemre/atnv2/multirouter/MultiRouterImpl.java multirouter/src/main/java/com/groupemre/atnv2/smartjog/router/SmartJogRouter.java multirouter/src/main/java/com/groupemre/atnv2/smartjog/service/SmartJogService.java

# delete branch
git branch -D

# merge branche
git checkout --ours     # local
git checkout --theirs   #


# diff avec MELD
sudo git diff 3d83be0 b571ec3



# DELETE BRANCH
git branch -D hotfixes

######################################################################
# INTELLIJ IDEA
######################################################################
# le merge
tu fais click droit > git > merge
Dans le 3 merge-tool, celui du centre sera le RESULTANT,
et les 2 autres de chaques cotes sont :
a gauche : remote
a droite : local


######################################################################


# A IGNORER (dans global ?)
modifié:         imdv-intranet/src/main/webapp/META-INF/context.xml
modifié:         imdv-intranet/src/main/webapp/WEB-INF/classes/application.properties
modifié:         imdv-intranet/src/main/webapp/WEB-INF/classes/log4j.properties
modifié:         imdv-intranet/src/main/webapp/welcome.html

# FONCTIONNEMENT COMMIT
- tu commits avec FIXES (ca fera passer le status a RESOLU)
- puis tu click sur le SHA et tu vas dans le depot (ca met un peu de temps a rafraichir et c est OK)


#----------------------------
# Besoin de supprimer des commits
#----------------------------
git rebase -i HEAD~4        # il va te proposer d editer un fichier et tu vas pouvoir supprimer les lignes que tu souhaites supprimer
git push -f origin hotfixes # il te faudra le -f



#----------------------------
#
#----------------------------
git fetch --tag
git tag IMDV-2.19.18



#
wget http://redmine.mre.pub/projects/medicis-recap/repository


#
git://gitorious.mre.pub/medicis/medicis.git
1bb372fe3049332e88d1ac62561532764f76294d
echo 1bb372fe3049332e88d1ac62561532764f76294d >> .git/refs/heads/hotfixes
